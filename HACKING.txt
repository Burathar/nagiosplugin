Development
===========

Getting the source
------------------

The source can be obtained via git from
https://github.com/mpounsett/nagiosplugin.git::

   git clone https://github.com/mpounsett/nagiosplugin.git

This package supports installation in a virtualenv::

   python3 -m venv .
   pip install -e .


Tests
-----

**nagiosplugin** tests are run by `tox`, which is configured to expect all of
the supported `python` versions to be present.  The easiest way to accomplish
this is by installing and using `pyenv`_.  

.. _pyenv: https://github.com/pyenv/pyenv

Once you have `pyenv` set up, make sure you have each of the supported
versions of python specified by the `envlist` in `tox.ini`.  This will likely
look something like::

   pyenv install 2.7.16
   pyenv install 3.4.10
   pyenv install 3.5.7
   pyenv install 3.6.9
   pyenv install 3.7.4
   pyenv global 3.7.4 3.6.9 3.5.7 3.4.10 2.7.16

Install test dependencies::

   pip install -e '.[test]'

After doing so, run the unit tests::

   tox

To limit tests to a particular python environment::

   tox -e py37

Run only linting tests::

   tox -e lint

nagiosplugin also includes support for test coverage reports. Coverage reports
are updated automatically by `tox`. Open :file:`htmlcov/index.html` to see
coverage reports.

You may run the supplied examples with the local interpreter::

   python3 nagiosplugin/examples/check_load.py


Documentation
-------------

The documentation depends on Sphinx.  Install the necessary dependencies, and
then build the documentation::

   pip install -e '.[doc]'
   make docs

HTML documentation will be built and installed in `doc/_build/html/`.  You can
read the documentation by opening `doc/_build/html/index.html`.


How to release
--------------

To make a release, we prefer `zest.releaser`_. To make a release, follow
the standard procedure, which usually boils down to::

   fullrelease

`nagiosplugin` tried to obey the semantic version numbering specification
published on SemVer_ but adapts it a little bit to be `PEP 386`_ compliant.

.. _zest.releaser: https://pypi.python.org/pypi/zest.releaser/
.. _SemVer: http://semver.org/
.. _PEP 386: https://www.python.org/dev/peps/pep-0386/

.. vim: set ft=rst sw=3 sts=3 et:
